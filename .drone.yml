kind: pipeline
name: default
type: docker

steps:
  - name: build
    image: mcr.microsoft.com/dotnet/sdk:5.0
    pull: if-not-exists
    commands:
      - env
      - dotnet build
  - name: release
    image: plugins/github-release
    settings:
      files:
        - RunHelloWorld/*
      api_key:
        from_secret: github_token
    depends_on:
      - dotnet build

    when:
      event: tag
      
#  - name: scan
#    pull: never
#    image: drone-plugins/drone-snyk
#    privileged: true
#    settings: 
#      dockerfile: RunHelloWorld/Dockerfile
#      image: mcr.microsoft.com/dotnet/sdk:5.0
#      debug: true
#      username: 
#        from_secret: username
#      password:
#        from_secret: password
#      snyk_token:
#        from_secret: snyk
#      fail_on_issues: false
      
#  - name: git-leak
#    pull: never
#    image: plugins/gitleaks