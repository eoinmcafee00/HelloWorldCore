kind: pipeline
name: default
type: docker

steps:
  - name: build
    image: mcr.microsoft.com/dotnet/sdk:5.0
    pull: if-not-exists
    commands:
      - dotnet build
    environment:
      aws_access_key: AKIAIOSFODNN7EXAMPLE

#  - name: scan
#    pull: never
#    image: drone-plugins/drone-snyk
#    privileged: true
#    settings:
#      image: mcr.microsoft.com/dotnet/sdk:5.0
#      debug: true
#      username:
#        from_secret: username
#      password:
#        from_secret: password
#      snyk:
#        from_secret: snyk
#      fail_on_issues: false

#  - name: docker
#    pull: never
#    image: plugins/docker
#    settings:
#      repo: eoinmcafee/drone-test
#      dockerfile: RunHelloWorld/Dockerfile
#      username:
#        from_secret: username
#      password:
#        from_secret: password

  - name: git-leak
    pull: never
    image: plugins/gitleaks